(function(e){function n(n){for(var a,c,i=n[0],u=n[1],o=n[2],l=0,d=[];l<i.length;l++)c=i[l],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&d.push(s[c][0]),s[c]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);g&&g(n);while(d.length)d.shift()();return r.push.apply(r,o||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],a=!0,i=1;i<t.length;i++){var u=t[i];0!==s[u]&&(a=!1)}a&&(r.splice(n--,1),e=c(c.s=t[0]))}return e}var a={},s={app:0},r=[];function c(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=e,c.c=a,c.d=function(e,n,t){c.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,n){if(1&n&&(e=c(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)c.d(t,a,function(n){return e[n]}.bind(null,a));return t},c.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(n,"a",n),n},c.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=n,i=i.slice();for(var o=0;o<i.length;o++)n(i[o]);var g=u;r.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"00e2":function(e,n,t){},"0623":function(e,n,t){"use strict";t("8a49")},"074f":function(e,n,t){e.exports=t.p+"img/Frame1.72044456.svg"},"0d3a":function(e,n,t){"use strict";t("19a6")},1615:function(e,n,t){},"19a6":function(e,n,t){},"2f90":function(e,n,t){"use strict";t("1615")},"2ff0":function(e,n,t){e.exports=t.p+"img/Icon3.ddce2079.svg"},"338e":function(e,n,t){e.exports=t.p+"img/Split_bar2.518d6226.svg"},"42af":function(e,n,t){e.exports=t.p+"img/BabilejoLogoSVG.188efdb1.svg"},"48c6":function(e,n,t){e.exports=t.p+"img/Frame6.c0426ba4.svg"},"538d":function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var a=t("7a23"),s={key:0,class:"main-interface"},r={class:"chat-sidebar"},c={class:"chat-room"},i={key:1},u={key:2};function o(e,n,t,o,g,l){var d=Object(a["n"])("ChatList"),h=Object(a["n"])("ChatRoom"),m=Object(a["n"])("SignIn"),f=Object(a["n"])("LanguageModal");return Object(a["j"])(),Object(a["d"])(a["a"],null,[e.showSignIn?Object(a["c"])("",!0):(Object(a["j"])(),Object(a["d"])("div",s,[Object(a["e"])("div",r,[Object(a["g"])(d,{users:e.users,username:e.username,onSelectChat:l.setChatId,unreadMessages:e.unreadMessages,messages:e.messages},null,8,["users","username","onSelectChat","unreadMessages","messages"])]),Object(a["e"])("div",c,[Object(a["g"])(h,{messages:e.messages,currentChatUser:e.currentChatUser,username:e.username,onSendMessage:this.sendMessage,currentLanguage:e.currentLanguage,onOpenLanguageModal:n[0]||(n[0]=function(n){return e.openmodal=!0})},null,8,["messages","currentChatUser","username","onSendMessage","currentLanguage"])])])),e.showSignIn?(Object(a["j"])(),Object(a["d"])("div",i,[Object(a["g"])(m,{users:e.users,onSignedin:l.setNickname},null,8,["users","onSignedin"])])):Object(a["c"])("",!0),e.openmodal?(Object(a["j"])(),Object(a["d"])("div",u,[Object(a["g"])(f,{currentLanguage:e.currentLanguage,onSetCurrentLanguage:this.setCurrentLanguage,onCloseLanguageModal:this.closeLanguageModal},null,8,["currentLanguage","onSetCurrentLanguage","onCloseLanguageModal"])])):Object(a["c"])("",!0)],64)}var g=t("1da1"),l=(t("96cf"),t("d3b7"),t("a434"),t("8e27")),d=t.n(l),h=t("42af"),m=t.n(h),f=t("074f"),b=t.n(f),p=t("93dc"),O=t.n(p),j=t("849b"),v=t.n(j),y=t("7bd5"),k=t.n(y),L=t("8e5a"),I=t.n(L),x=t("48c6"),w=t.n(x),C=t("338e"),M=t.n(C);Object(a["l"])("data-v-ddfe71a4");var S={class:"signin-container"},F={class:"full-logo"},T=Object(a["e"])("img",{src:m.a},null,-1),A={id:"logoanimate"},U=Object(a["e"])("img",{class:"splitbar",src:M.a},null,-1),N={class:"SignInForm"},_=Object(a["e"])("label",{for:"signinfield"},"Â¡Bienvenid@! Introduce un nickname para empezar a chatear",-1),E=Object(a["e"])("br",null,null,-1),P=Object(a["e"])("br",null,null,-1),$=["disabled"];function q(e,n,t,s,r,c){return Object(a["j"])(),Object(a["d"])("div",S,[Object(a["e"])("div",F,[T,Object(a["e"])("div",A,[Object(a["e"])("img",{class:Object(a["i"])({hide:1!=r.animateTurn}),src:b.a},null,2),Object(a["e"])("img",{class:Object(a["i"])({hide:2!=r.animateTurn}),src:O.a},null,2),Object(a["e"])("img",{class:Object(a["i"])({hide:3!=r.animateTurn}),src:v.a},null,2),Object(a["e"])("img",{class:Object(a["i"])({hide:4!=r.animateTurn}),src:k.a},null,2),Object(a["e"])("img",{class:Object(a["i"])({hide:5!=r.animateTurn}),src:I.a},null,2),Object(a["e"])("img",{class:Object(a["i"])({hide:6!=r.animateTurn}),src:w.a},null,2)])]),U,Object(a["e"])("div",N,[_,E,Object(a["q"])(Object(a["e"])("input",{type:"text",id:"signinfield",name:"signinfield","onUpdate:modelValue":n[0]||(n[0]=function(e){return r.nickname=e}),onKeydown:n[1]||(n[1]=function(e){return r.inputOk=!0}),onKeyup:n[2]||(n[2]=function(){return c.checkInput&&c.checkInput.apply(c,arguments)}),placeholder:"Nombre de usuario"},null,544),[[a["p"],r.nickname]]),P,Object(a["e"])("span",{class:Object(a["i"])({hide:r.inputOk||""==r.nickname})},"ðŸš« El nickname introducido no estÃ¡ disponible",2),Object(a["e"])("br",{class:Object(a["i"])({hide:r.inputOk||""==r.nickname})},null,2),Object(a["e"])("button",{onClick:n[3]||(n[3]=function(){return c.sendNickname&&c.sendNickname.apply(c,arguments)}),disabled:!r.inputOk},"Acceder",8,$)])])}Object(a["k"])();t("caad"),t("2532");var J={props:["users"],data:function(){return{nickname:"",inputOk:!1,animateTurn:1}},methods:{checkInput:function(){""==this.nickname||this.users.includes(this.nickname)?this.inputOk=!1:this.inputOk=!0},sendNickname:function(){this.users.includes(this.nickname)||this.$emit("signedin",this.nickname)},changeFrame:function(){this.animateTurn++,this.animateTurn>6&&(this.animateTurn=1)}},mounted:function(){setInterval(this.changeFrame,1e3)}};t("0623");J.render=q,J.__scopeId="data-v-ddfe71a4";var B=J,D=t("f08d"),K=t.n(D);Object(a["l"])("data-v-af41861a");var W={class:"chat-bar"},R={key:0,class:"chat-bar-text"},V={key:1,class:"chat-bar-text"},z=["src"],Y={key:0,class:"messages",id:"messages-box"},G={class:"message-text"},H={class:"message-time"},Q={key:1,class:"input-container"};function X(e,n,s,r,c,i){return Object(a["j"])(),Object(a["d"])(a["a"],null,[Object(a["e"])("div",W,[""!=s.currentChatUser?(Object(a["j"])(),Object(a["d"])("div",R,Object(a["o"])(s.currentChatUser),1)):(Object(a["j"])(),Object(a["d"])("div",V," Selecciona a un usuario o evento ")),Object(a["e"])("div",{class:"language-selector-button",onClick:n[0]||(n[0]=function(){return i.openModal&&i.openModal.apply(i,arguments)})},[Object(a["e"])("img",{src:t("a49b")("./"+i.currentLanguageIcon(s.currentLanguage)+"Icon.svg")},null,8,z),Object(a["f"])(" "+Object(a["o"])(i.currentLanguageName(s.currentLanguage)),1)])]),Object(a["e"])("div",{class:Object(a["i"])(["chat-window",{backgroundchat:""!=s.currentChatUser}])},[""!=s.currentChatUser?(Object(a["j"])(),Object(a["d"])("div",Y,[(Object(a["j"])(!0),Object(a["d"])(a["a"],null,Object(a["m"])(i.currentMessages,(function(e){return Object(a["j"])(),Object(a["d"])("div",{class:Object(a["i"])({"message-wrap":e.usernameFrom!=s.username,"mymessage-wrap":e.usernameFrom==s.username}),key:s.messages.indexOf(e)},[Object(a["e"])("div",{class:Object(a["i"])({message:e.usernameFrom!=s.username,mymessage:e.usernameFrom==s.username})},[Object(a["e"])("div",{class:Object(a["i"])(["username",{hide:e.usernameFrom==s.username}])},Object(a["o"])(e.usernameFrom),3),Object(a["e"])("div",G,Object(a["o"])(e.msg),1),Object(a["e"])("div",H,Object(a["o"])(e.timestamp),1)],2)],2)})),128))])):Object(a["c"])("",!0),""!=s.currentChatUser?(Object(a["j"])(),Object(a["d"])("div",Q,[Object(a["q"])(Object(a["e"])("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=function(n){return e.msg=n}),placeholder:"Introduce tu mensaje..."},null,512),[[a["p"],e.msg]]),Object(a["e"])("img",{onClick:n[2]||(n[2]=function(){return i.sendMessage&&i.sendMessage.apply(i,arguments)}),src:K.a})])):Object(a["c"])("",!0)],2)],64)}Object(a["k"])();t("fb6a"),t("4de4");var Z={name:"chatroom",props:["messages","currentChatUser","username","currentLanguage"],emits:["openLanguageModal","sendMessage"],data:function(){return{msg:""}},methods:{sendMessage:function(){this.$emit("sendMessage",this.msg),this.msg=""},updateScroll:function(){var e=document.getElementById("messages-box");e.scrollHeight=e.scrollTop},currentLanguageIcon:function(e){return"es"==e?e="Spanish":"ja"==e?e="Japanese":"ko"==e?e="Korean":"fr"==e?e="French":"en"==e&&(e="English"),e},currentLanguageName:function(e){return"es"==e?e="EspaÃ±ol":"ja"==e?e="æ—¥æœ¬èªž":"ko"==e?e="í•œêµ­ì–´":"fr"==e?e="FranÃ§ais":"en"==e&&(e="English"),e},openModal:function(){this.$emit("openLanguageModal",!0)}},computed:{currentMessages:function(){var e=this;return this.messages.filter((function(n){return n.usernameFrom==e.currentChatUser&&n.usernameTo==e.username||n.usernameFrom==e.username&&n.usernameTo==e.currentChatUser})).slice().reverse()}}};t("2f90");Z.render=X,Z.__scopeId="data-v-af41861a";var ee=Z;t("ac1f"),t("841c");Object(a["l"])("data-v-5a48cf59");var ne={class:"chat-search"},te={class:"chat-list"},ae=["onClick"],se={class:"chat-preview-img"},re=["src"],ce={class:"chat-data"},ie={class:"chat-name"},ue={class:"chat-last"},oe=Object(a["e"])("span",{class:"watermark"},"Babilejo",-1);function ge(e,n,s,r,c,i){return Object(a["j"])(),Object(a["d"])(a["a"],null,[Object(a["e"])("div",ne,[Object(a["q"])(Object(a["e"])("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=function(n){return e.search=n}),placeholder:"Buscar en Babilejo..."},null,512),[[a["p"],e.search]])]),Object(a["e"])("div",te,[(Object(a["j"])(!0),Object(a["d"])(a["a"],null,Object(a["m"])(i.filteredUsers,(function(n){return Object(a["j"])(),Object(a["d"])("div",{class:Object(a["i"])(["chat-preview",{highlight:s.users.indexOf(n)==e.selected,myself:n==s.username}]),key:s.users.indexOf(n),onClick:function(t){return e.selected=s.users.indexOf(n),i.selectChat(s.users.indexOf(n))}},[Object(a["e"])("div",se,[Object(a["e"])("img",{src:t("a750")("./Icon"+i.alternateIcon(s.users.indexOf(n))+".svg")},null,8,re),Object(a["e"])("span",{class:Object(a["i"])(["messages-number",{zerodigit:0==s.unreadMessages[s.users.indexOf(n)],onedigit:s.unreadMessages[s.users.indexOf(n)]<=9,twodigit:s.unreadMessages[s.users.indexOf(n)]>9}])},Object(a["o"])(s.unreadMessages[s.users.indexOf(n)]),3)]),Object(a["e"])("div",ce,[Object(a["e"])("div",ie,Object(a["o"])(n),1),Object(a["e"])("div",ue,Object(a["o"])(i.lastMessage(n)),1)])],10,ae)})),128))]),oe],64)}Object(a["k"])();var le={name:"chatlist",props:["users","username","unreadMessages","messages"],emits:["selectChat"],data:function(){return{selected:void 0,search:""}},methods:{selectChat:function(e){this.$emit("selectChat",e)},alternateIcon:function(e){while(e>5)e=Math.floor(e/5);return e},lastMessage:function(e){var n="";if(void 0!=this.messages)for(var t=this.messages.length-1;t>=0;t--)if(this.messages[t].usernameFrom==e||this.messages[t].usernameTo==e){n=this.messages[t].msg;break}return n}},computed:{filteredUsers:function(){var e=this;return this.users.filter((function(n){return n.toLowerCase().includes(e.search.toLowerCase())}))}}};t("b645");le.render=ge,le.__scopeId="data-v-5a48cf59";var de=le;Object(a["l"])("data-v-c975928e");var he=["src"],me={class:"wheel-selector"},fe={class:"wheel-selector-text wheel2"},be={class:"wheel-selector-text wheel1"},pe={class:"wheel-selector-text-bold"},Oe={class:"wheel-selector-text wheel1"},je={class:"wheel-selector-text wheel2"};function ve(e,n,s,r,c,i){return Object(a["j"])(),Object(a["d"])("div",{id:"myModal",class:"modal",onClick:n[1]||(n[1]=function(n){return e.$emit("closeLanguageModal")})},[Object(a["e"])("div",{class:"modal-content",onWheel:n[0]||(n[0]=function(e){return i.handleWheel()})},[Object(a["e"])("img",{src:t("a49b")("./"+i.currentLanguageIcon(e.localcurrentLanguage)+"Icon.svg")},null,8,he),Object(a["e"])("div",me,[Object(a["e"])("div",fe,Object(a["o"])(i.currentLanguageName(e.languageSelectorArray[0])),1),Object(a["e"])("div",be,Object(a["o"])(i.currentLanguageName(e.languageSelectorArray[1])),1),Object(a["e"])("div",pe,Object(a["o"])(i.currentLanguageName(e.languageSelectorArray[2])),1),Object(a["e"])("div",Oe,Object(a["o"])(i.currentLanguageName(e.languageSelectorArray[3])),1),Object(a["e"])("div",je,Object(a["o"])(i.currentLanguageName(e.languageSelectorArray[4])),1)])],32)])}Object(a["k"])();var ye={props:["currentLanguage"],data:function(){return{languageArray:["ko","ja","es","fr","en"],languageSelectorArray:[],localcurrentLanguage:this.currentLanguage}},methods:{currentLanguageIcon:function(e){return"es"==e?e="Spanish":"ja"==e?e="Japanese":"ko"==e?e="Korean":"fr"==e?e="French":"en"==e&&(e="English"),e},currentLanguageName:function(e){return"es"==e?e="EspaÃ±ol":"ja"==e?e="æ—¥æœ¬èªž":"ko"==e?e="í•œêµ­ì–´":"fr"==e?e="FranÃ§ais":"en"==e&&(e="English"),e},handleWheel:function(){window.addEventListener("wheel",this.handleWheelThis)},handleWheelThis:function(e){var n=this.languageArray.indexOf(this.currentLanguage);e.deltaY<0?(n--,n<0&&(n=this.languageArray.length-1),this.$emit("setCurrentLanguage",this.languageArray[n])):e.deltaY>0&&(n++,n>this.languageArray.length-1&&(n=0),this.$emit("setCurrentLanguage",this.languageArray[n])),this.localcurrentLanguage=this.languageArray[n],this.renderLanguageList(n)},renderLanguageList:function(e){var n=e-2;n<0&&(n=this.languageArray.length+n);var t=e-1;t<0&&(t=this.languageArray.length+t);var a=e+1;a>this.languageArray.length-1&&(a-=this.languageArray.length);var s=e+2;s>this.languageArray.length-1&&(s-=this.languageArray.length),this.languageSelectorArray=[this.languageArray[n],this.languageArray[t],this.languageArray[e],this.languageArray[a],this.languageArray[s]]}},created:function(){var e=this.languageArray.indexOf(this.currentLanguage);this.renderLanguageList(e)},beforeUnmount:function(){window.removeEventListener("wheel",this.handleWheelThis)}};t("ea9e");ye.render=ve,ye.__scopeId="data-v-c975928e";var ke=ye,Le={name:"App",components:{SignIn:B,ChatRoom:ee,ChatList:de,LanguageModal:ke},data:function(){return{username:"",socket:d()("http://babilejo.herokuapp.com:3000"),messages:[],users:[],showSignIn:!0,currentChatId:"",currentChatUser:"",currentLanguage:"es",openmodal:!1,unreadMessages:[]}},methods:{joinServer:function(){this.socket.emit("start",this.showSignIn),this.listen()},listen:function(){var e=this;this.socket.on("loggedIn",(function(n){e.users=n.users,e.socket.emit("newuser",e.username)})),this.socket.on("msg",(function(n){e.$notification.show(n.usernameFrom,{body:n.msg},{}),e.users.indexOf(n.usernameFrom)!=e.currentChatId&&e.unreadMessages[e.users.indexOf(n.usernameFrom)]++,n.language==e.currentLanguage?e.messages.push(n):e.requestTranslation(n)}))},requestTranslation:function(e){var n=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://translate.astian.org/translate",{method:"POST",body:JSON.stringify({q:e.msg,source:e.language,target:n.currentLanguage}),headers:{"Content-Type":"application/json"}});case 2:return a=t.sent,t.next=5,a.json();case 5:s=t.sent,e.msg=s.translatedText,n.messages.push(e);case 8:case"end":return t.stop()}}),t)})))()},setNickname:function(e){this.showSignIn=!1,this.username=e,this.username||(this.username="Anonymous"),this.joinServer()},sendMessage:function(e){var n={usernameFrom:this.username,usernameTo:this.users[this.currentChatId],msg:e,timestamp:this.getTime(),language:this.currentLanguage};this.messages.push(n),this.socket.emit("msg",n)},setChatId:function(e){this.currentChatId=e,this.currentChatUser=this.users[this.currentChatId],this.unreadMessages[this.currentChatId]=0},getTime:function(){var e=(new Date).toLocaleTimeString();return e=e.substr(0,e.lastIndexOf(":")),e},setCurrentLanguage:function(e){this.currentLanguage=e},closeLanguageModal:function(){this.openmodal=!1}},created:function(){var e=this;this.socket.emit("start",this.showSignIn),this.socket.on("userData",(function(n){e.users=n.users;for(var t=0;t<e.users.length;t++)e.unreadMessages.push(0)})),this.socket.on("userOnline",(function(n){e.unreadMessages.push(0),e.users.push(n)})),this.socket.on("userLeft",(function(n){e.unreadMessages.splice(e.users.indexOf(n),1),e.users.splice(e.users.indexOf(n),1)}))}};t("0d3a");Le.render=o;var Ie=Le,xe=t("7f0a"),we=Object(a["b"])(Ie);we.use(xe["a"],{requestOnNotify:!0}),we.mount("#app")},"646b":function(e,n,t){e.exports=t.p+"img/FrenchIcon.86b57102.svg"},"793b":function(e,n,t){e.exports=t.p+"img/JapaneseIcon.8ca2a073.svg"},"7bd5":function(e,n,t){e.exports=t.p+"img/Frame4.c45f11e2.svg"},"7d23":function(e,n,t){e.exports=t.p+"img/Icon0.84464e7a.svg"},"849b":function(e,n,t){e.exports=t.p+"img/Frame3.697c2979.svg"},"8a49":function(e,n,t){},"8e5a":function(e,n,t){e.exports=t.p+"img/Frame5.90469a1a.svg"},"93dc":function(e,n,t){e.exports=t.p+"img/Frame2.557d9526.svg"},"9ba1":function(e,n,t){e.exports=t.p+"img/Icon1.ec76f2a8.svg"},a093:function(e,n,t){e.exports=t.p+"img/SpanishIcon.62d705d2.svg"},a49b:function(e,n,t){var a={"./EnglishIcon.svg":"df59","./EsperantoIcon.svg":"e59c","./FrenchIcon.svg":"646b","./JapaneseIcon.svg":"793b","./KoreanIcon.svg":"d14d","./SendIcon.svg":"f08d","./SpanishIcon.svg":"a093"};function s(e){var n=r(e);return t(n)}function r(e){if(!t.o(a,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=r,e.exports=s,s.id="a49b"},a750:function(e,n,t){var a={"./Icon0.svg":"7d23","./Icon1.svg":"9ba1","./Icon2.svg":"c3d6","./Icon3.svg":"2ff0","./Icon4.svg":"aa17","./Icon5.svg":"c764"};function s(e){var n=r(e);return t(n)}function r(e){if(!t.o(a,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=r,e.exports=s,s.id="a750"},aa17:function(e,n,t){e.exports=t.p+"img/Icon4.1502f794.svg"},b645:function(e,n,t){"use strict";t("538d")},c3d6:function(e,n,t){e.exports=t.p+"img/Icon2.97c498cb.svg"},c764:function(e,n,t){e.exports=t.p+"img/Icon5.d505c894.svg"},d14d:function(e,n,t){e.exports=t.p+"img/KoreanIcon.7adc69bd.svg"},df59:function(e,n,t){e.exports=t.p+"img/EnglishIcon.d53f4d67.svg"},e59c:function(e,n,t){e.exports=t.p+"img/EsperantoIcon.2d889e86.svg"},ea9e:function(e,n,t){"use strict";t("00e2")},f08d:function(e,n,t){e.exports=t.p+"img/SendIcon.9ed075d8.svg"}});
//# sourceMappingURL=app.27e11a5a.js.map