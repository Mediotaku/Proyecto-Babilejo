(function(e){function t(t){for(var s,i,c=t[0],o=t[1],u=t[2],l=0,d=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);g&&g(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,c=1;c<n.length;c++){var o=n[c];0!==a[o]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},a={app:0},r=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var g=o;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"01c5":function(e,t,n){"use strict";n("e9e8")},"074f":function(e,t,n){e.exports=n.p+"img/Frame1.72044456.svg"},"10e5":function(e,t,n){"use strict";n("8aa4")},"130b":function(e,t,n){e.exports=n.p+"img/SettingsIcon.062a2c5e.svg"},"13fe":function(e,t,n){e.exports=n.p+"img/BabilejoLogoSmall.1c2e7a31.svg"},"1b6c":function(e,t,n){e.exports=n.p+"img/BabilejoB.e76d588a.svg"},"27d2":function(e,t,n){},"2ff0":function(e,t,n){e.exports=n.p+"img/Icon3.ddce2079.svg"},"338e":function(e,t,n){e.exports=n.p+"img/Split_bar2.518d6226.svg"},"3c7d":function(e,t,n){e.exports=n.p+"img/BackIconx2.ebd0a230.svg"},"42af":function(e,t,n){e.exports=n.p+"img/BabilejoLogoSVG.188efdb1.svg"},"48c6":function(e,t,n){e.exports=n.p+"img/Frame6.c0426ba4.svg"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("7a23"),a={key:0,class:"main-interface"},r={id:"chat-sidebar",class:"chat-sidebar"},i={class:"chat-room"},c={key:1},o={key:2};function u(e,t,n,u,g,l){var d=Object(s["n"])("ChatList"),b=Object(s["n"])("ChatRoom"),m=Object(s["n"])("SignIn"),h=Object(s["n"])("LanguageModal");return Object(s["j"])(),Object(s["d"])(s["a"],null,[e.showSignIn?Object(s["c"])("",!0):(Object(s["j"])(),Object(s["d"])("div",a,[Object(s["e"])("div",{onClick:t[0]||(t[0]=function(){return l.closeMenu&&l.closeMenu.apply(l,arguments)}),id:"menu-overlay",class:"menu-overlay"}),Object(s["e"])("div",r,[Object(s["g"])(d,{users:e.users,username:e.username,onSelectChat:l.setChatId,unreadMessages:e.unreadMessages,messages:e.messages,onPushNotifications:l.setPushNotifications},null,8,["users","username","onSelectChat","unreadMessages","messages","onPushNotifications"])]),Object(s["e"])("div",i,[Object(s["g"])(b,{messages:e.messages,currentChatUser:e.currentChatUser,username:e.username,onSendMessage:this.sendMessage,currentLanguage:e.currentLanguage,onOpenLanguageModal:t[1]||(t[1]=function(t){return e.openmodal=!0}),onOpenMenu:l.openMenu},null,8,["messages","currentChatUser","username","onSendMessage","currentLanguage","onOpenMenu"])])])),e.showSignIn?(Object(s["j"])(),Object(s["d"])("div",c,[Object(s["g"])(m,{users:e.users,onSignedin:l.setNickname},null,8,["users","onSignedin"])])):Object(s["c"])("",!0),e.openmodal?(Object(s["j"])(),Object(s["d"])("div",o,[Object(s["g"])(h,{currentLanguage:e.currentLanguage,onSetCurrentLanguage:this.setCurrentLanguage,onCloseLanguageModal:this.closeLanguageModal},null,8,["currentLanguage","onSetCurrentLanguage","onCloseLanguageModal"])])):Object(s["c"])("",!0)],64)}var g=n("1da1"),l=(n("96cf"),n("d3b7"),n("a434"),n("8e27")),d=n.n(l),b=n("42af"),m=n.n(b),h=n("074f"),f=n.n(h),p=n("93dc"),O=n.n(p),j=n("849b"),v=n.n(j),y=n("7bd5"),k=n.n(y),I=n("8e5a"),x=n.n(I),L=n("48c6"),w=n.n(L),M=n("338e"),S=n.n(M);Object(s["l"])("data-v-08c9a946");var C={class:"signin-container"},N={class:"full-logo"},A=Object(s["e"])("img",{src:m.a},null,-1),V={id:"logoanimate"},F=Object(s["e"])("img",{class:"splitbar",src:S.a},null,-1),T={class:"SignInForm"},E=Object(s["e"])("label",{for:"signinfield"},"¡Bienvenid@! Introduce un nickname para empezar a chatear",-1),_=Object(s["e"])("br",null,null,-1),B=Object(s["e"])("br",null,null,-1),U=["disabled"];function P(e,t,n,a,r,i){return Object(s["j"])(),Object(s["d"])("div",C,[Object(s["e"])("div",N,[A,Object(s["e"])("div",V,[Object(s["e"])("img",{class:Object(s["i"])({hide:1!=r.animateTurn}),src:f.a},null,2),Object(s["e"])("img",{class:Object(s["i"])({hide:2!=r.animateTurn}),src:O.a},null,2),Object(s["e"])("img",{class:Object(s["i"])({hide:3!=r.animateTurn}),src:v.a},null,2),Object(s["e"])("img",{class:Object(s["i"])({hide:4!=r.animateTurn}),src:k.a},null,2),Object(s["e"])("img",{class:Object(s["i"])({hide:5!=r.animateTurn}),src:x.a},null,2),Object(s["e"])("img",{class:Object(s["i"])({hide:6!=r.animateTurn}),src:w.a},null,2)])]),F,Object(s["e"])("div",T,[E,_,Object(s["r"])(Object(s["e"])("input",{type:"text",id:"signinfield",name:"signinfield","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.nickname=e}),onKeydown:t[1]||(t[1]=function(e){return r.inputOk=!0}),onKeyup:t[2]||(t[2]=function(){return i.checkInput&&i.checkInput.apply(i,arguments)}),placeholder:"Nombre de usuario"},null,544),[[s["q"],r.nickname]]),B,Object(s["e"])("span",{class:Object(s["i"])({hide:r.inputOk||""==r.nickname})},"🚫 El nickname introducido no está disponible",2),Object(s["e"])("br",{class:Object(s["i"])({hide:r.inputOk||""==r.nickname})},null,2),Object(s["e"])("button",{onClick:t[3]||(t[3]=function(){return i.sendNickname&&i.sendNickname.apply(i,arguments)}),disabled:!r.inputOk},"Acceder",8,U)])])}Object(s["k"])();n("caad"),n("2532");var $={props:["users"],data:function(){return{nickname:"",inputOk:!1,animateTurn:1}},methods:{checkInput:function(){""==this.nickname||this.users.includes(this.nickname)?this.inputOk=!1:this.inputOk=!0},sendNickname:function(){this.users.includes(this.nickname)||this.$emit("signedin",this.nickname)},changeFrame:function(){this.animateTurn++,this.animateTurn>6&&(this.animateTurn=1)}},mounted:function(){setInterval(this.changeFrame,1e3)}};n("8310");$.render=P,$.__scopeId="data-v-08c9a946";var J=$,q=n("6e4c"),K=n.n(q),D=n("f08d"),W=n.n(D);Object(s["l"])("data-v-6f0d14f4");var R={class:"chat-bar"},z={key:0,class:"chat-bar-text"},Y={key:1,class:"chat-bar-text"},G=["src"],H={key:0,class:"messages",id:"messages-box"},Q={class:"message-text"},X={class:"message-time"},Z={key:1,class:"input-container"};function ee(e,t,a,r,i,c){return Object(s["j"])(),Object(s["d"])(s["a"],null,[Object(s["e"])("div",R,[Object(s["e"])("img",{onClick:t[0]||(t[0]=function(t){return e.$emit("openMenu")}),id:"menu-button",src:K.a}),""!=a.currentChatUser?(Object(s["j"])(),Object(s["d"])("div",z,Object(s["o"])(a.currentChatUser),1)):(Object(s["j"])(),Object(s["d"])("div",Y," Selecciona a un usuario o evento ")),Object(s["e"])("div",{class:"language-selector-button",onClick:t[1]||(t[1]=function(){return c.openModal&&c.openModal.apply(c,arguments)})},[Object(s["e"])("img",{src:n("a49b")("./"+c.currentLanguageIcon(a.currentLanguage)+"Icon.svg")},null,8,G),Object(s["f"])(" "+Object(s["o"])(c.currentLanguageName(a.currentLanguage)),1)])]),Object(s["e"])("div",{class:Object(s["i"])(["chat-window",{backgroundchat:""!=a.currentChatUser}])},[""!=a.currentChatUser?(Object(s["j"])(),Object(s["d"])("div",H,[(Object(s["j"])(!0),Object(s["d"])(s["a"],null,Object(s["m"])(c.currentMessages,(function(e){return Object(s["j"])(),Object(s["d"])("div",{class:Object(s["i"])({"message-wrap":e.usernameFrom!=a.username,"mymessage-wrap":e.usernameFrom==a.username}),key:a.messages.indexOf(e)},[Object(s["e"])("div",{class:Object(s["i"])({message:e.usernameFrom!=a.username,mymessage:e.usernameFrom==a.username})},[Object(s["e"])("div",{class:Object(s["i"])(["username",{hide:e.usernameFrom==a.username}])},Object(s["o"])(e.usernameFrom),3),Object(s["e"])("div",Q,Object(s["o"])(e.msg),1),Object(s["e"])("div",X,Object(s["o"])(e.timestamp),1)],2)],2)})),128))])):Object(s["c"])("",!0),""!=a.currentChatUser?(Object(s["j"])(),Object(s["d"])("div",Z,[Object(s["r"])(Object(s["e"])("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.msg=t}),onKeyup:t[3]||(t[3]=Object(s["s"])((function(){return c.sendMessage&&c.sendMessage.apply(c,arguments)}),["enter"])),placeholder:"Introduce tu mensaje..."},null,544),[[s["q"],e.msg]]),Object(s["e"])("img",{onClick:t[4]||(t[4]=function(){return c.sendMessage&&c.sendMessage.apply(c,arguments)}),src:W.a})])):Object(s["c"])("",!0)],2)],64)}Object(s["k"])();n("fb6a"),n("4de4");var te={name:"chatroom",props:["messages","currentChatUser","username","currentLanguage"],emits:["openLanguageModal","sendMessage","openMenu"],data:function(){return{msg:""}},methods:{sendMessage:function(){this.$emit("sendMessage",this.msg),this.msg=""},updateScroll:function(){var e=document.getElementById("messages-box");e.scrollHeight=e.scrollTop},currentLanguageIcon:function(e){return"es"==e?e="Spanish":"ja"==e?e="Japanese":"ko"==e?e="Korean":"fr"==e?e="French":"en"==e&&(e="English"),e},currentLanguageName:function(e){return"es"==e?e="Español":"ja"==e?e="日本語":"ko"==e?e="한국어":"fr"==e?e="Français":"en"==e&&(e="English"),e},openModal:function(){this.$emit("openLanguageModal",!0)}},computed:{currentMessages:function(){var e=this;return this.messages.filter((function(t){return t.usernameFrom==e.currentChatUser&&t.usernameTo==e.username||t.usernameFrom==e.username&&t.usernameTo==e.currentChatUser})).slice().reverse()}}};n("7370");te.render=ee,te.__scopeId="data-v-6f0d14f4";var ne=te,se=(n("ac1f"),n("841c"),n("3c7d")),ae=n.n(se),re=n("67a9"),ie=n.n(re),ce=n("130b"),oe=n.n(ce);Object(s["l"])("data-v-201997ee");var ue={class:"chat-search"},ge={id:"animate-button"},le={class:"chat-list"},de=["onClick"],be={class:"chat-preview-img"},me=["src"],he={class:"chat-data"},fe={class:"chat-name"},pe={class:"chat-last"},Oe={class:"settings-user"},je=["src"],ve={class:"settings-username"},ye={class:"settings-container"},ke=["src"],Ie=Object(s["e"])("div",null,"Notificaciones",-1),xe=["src"],Le=Object(s["e"])("div",null,"Sobre Babilejo",-1),we=Object(s["f"])("Notificaciones en pantalla"),Me=Object(s["e"])("br",null,null,-1),Se=["src"],Ce=Object(s["e"])("p",null,"“Babilejo” es un chat multilingüe de código abierto creado por Civiencia SL.",-1),Ne=Object(s["e"])("p",null,"Este recurso ha sido desarrollado por José Vicente Tomás Pérez Contacto: Mediotaku@gmail.com @mediotaku",-1),Ae=Object(s["e"])("span",{class:"watermark"},"Babilejo",-1);function Ve(e,t,a,r,i,c){return Object(s["j"])(),Object(s["d"])(s["a"],null,[Object(s["e"])("div",ue,[Object(s["e"])("div",ge,[Object(s["e"])("img",{id:"back-button-x2",onClick:t[0]||(t[0]=function(t){return e.toggleNotificationsVar=!1,e.toggleAboutVar=!1}),class:Object(s["i"])({"visible-settings":e.toggleNotificationsVar||e.toggleAboutVar}),src:ae.a},null,2),Object(s["e"])("img",{id:"back-button",onClick:t[1]||(t[1]=function(t){return e.toggleSettingsVar=!e.toggleSettingsVar}),class:Object(s["i"])({"back-button-rotated":e.toggleSettingsVar,"hidden-settings":e.toggleNotificationsVar||e.toggleAboutVar}),src:ie.a},null,2),Object(s["e"])("img",{id:"settings-button",onClick:t[2]||(t[2]=function(t){return e.toggleSettingsVar=!e.toggleSettingsVar}),class:Object(s["i"])({"settings-button-rotated":e.toggleSettingsVar}),src:oe.a},null,2)]),Object(s["r"])(Object(s["e"])("input",{id:"chat-input",class:Object(s["i"])({"hidden-settings":e.toggleSettingsVar}),type:"text","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.search=t}),placeholder:"Buscar en Babilejo..."},null,2),[[s["q"],e.search]]),Object(s["e"])("div",{class:Object(s["i"])(["settings-name",{"visible-settings":e.toggleSettingsVar&&!e.toggleNotificationsVar&&!e.toggleAboutVar}])},"Ajustes",2),Object(s["e"])("div",{class:Object(s["i"])(["settings-name",{"visible-settings":e.toggleNotificationsVar&&!e.toggleAboutVar}])},"Notificaciones",2),Object(s["e"])("div",{class:Object(s["i"])(["settings-name",{"visible-settings":e.toggleAboutVar}])},"Sobre Babilejo",2)]),Object(s["e"])("div",le,[(Object(s["j"])(!0),Object(s["d"])(s["a"],null,Object(s["m"])(c.filteredUsers,(function(t){return Object(s["j"])(),Object(s["d"])("div",{class:Object(s["i"])(["chat-preview",{highlight:a.users.indexOf(t)==e.selected,myself:t==a.username,"hidden-settings":e.toggleSettingsVar}]),key:a.users.indexOf(t),onClick:function(n){return e.selected=a.users.indexOf(t),c.selectChat(a.users.indexOf(t))}},[Object(s["e"])("div",be,[Object(s["e"])("img",{src:n("a750")("./Icon"+c.alternateIcon(a.users.indexOf(t))+".svg")},null,8,me),Object(s["e"])("span",{class:Object(s["i"])(["messages-number",{zerodigit:0==a.unreadMessages[a.users.indexOf(t)],onedigit:a.unreadMessages[a.users.indexOf(t)]<=9,twodigit:a.unreadMessages[a.users.indexOf(t)]>9}])},Object(s["o"])(a.unreadMessages[a.users.indexOf(t)]),3)]),Object(s["e"])("div",he,[Object(s["e"])("div",fe,Object(s["o"])(t),1),Object(s["e"])("div",pe,Object(s["o"])(c.lastMessage(t)),1)])],10,de)})),128)),Object(s["e"])("div",{id:"settings-options",class:Object(s["i"])({"visible-settings":e.toggleSettingsVar})},[Object(s["e"])("div",Oe,[Object(s["e"])("img",{src:n("a750")("./Icon"+c.alternateIcon(a.users.indexOf(a.username))+".svg")},null,8,je),Object(s["e"])("div",ve,Object(s["o"])(a.username),1)]),Object(s["e"])("div",{class:Object(s["i"])(["settings-container-outer",{"notifications-opened":e.toggleNotificationsVar,"about-opened":e.toggleAboutVar}])},[Object(s["e"])("div",ye,[Object(s["e"])("div",{onClick:t[4]||(t[4]=function(t){return e.toggleNotificationsVar=!e.toggleNotificationsVar}),class:"settings-option"},[Object(s["e"])("img",{src:n("7315")},null,8,ke),Ie]),Object(s["e"])("div",{onClick:t[5]||(t[5]=function(t){return e.toggleAboutVar=!e.toggleAboutVar}),class:"settings-option"},[Object(s["e"])("img",{src:n("1b6c")},null,8,xe),Le])]),Object(s["e"])("div",{class:Object(s["i"])(["settings-notifications",{"visible-settings":e.toggleNotificationsVar}])},[Object(s["e"])("label",null,[Object(s["r"])(Object(s["e"])("input",{type:"checkbox",value:"push_checkbox","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.push_checkbox=t}),onChange:t[7]||(t[7]=function(t){return e.$emit("pushNotifications",e.push_checkbox)})},null,544),[[s["p"],e.push_checkbox]]),we]),Me],2),Object(s["e"])("div",{class:Object(s["i"])(["settings-about",{"visible-settings":e.toggleAboutVar}])},[Object(s["e"])("img",{src:n("13fe")},null,8,Se),Ce,Ne],2)],2)],2)]),Ae],64)}Object(s["k"])();var Fe={name:"chatlist",props:["users","username","unreadMessages","messages"],emits:["selectChat","pushNotifications"],data:function(){return{selected:void 0,search:"",toggleSettingsVar:!1,toggleNotificationsVar:!1,toggleAboutVar:!1,push_checkbox:!1,sound_checkbox:!1,light_checkbox:!0}},methods:{selectChat:function(e){this.$emit("selectChat",e)},alternateIcon:function(e){while(e>5)e=Math.floor(e/5);return e<0&&(e=0),e},lastMessage:function(e){var t="";if(void 0!=this.messages)for(var n=this.messages.length-1;n>=0;n--)if(this.messages[n].usernameFrom==e||this.messages[n].usernameTo==e){t=this.messages[n].msg;break}return t},settingsName:function(){}},computed:{filteredUsers:function(){var e=this;return this.users.filter((function(t){return t.toLowerCase().includes(e.search.toLowerCase())}))}}};n("10e5");Fe.render=Ve,Fe.__scopeId="data-v-201997ee";var Te=Fe;Object(s["l"])("data-v-3a87c03f");var Ee=["src"],_e={class:"wheel-selector"},Be={class:"wheel-selector-text wheel2"},Ue={class:"wheel-selector-text wheel1"},Pe={class:"wheel-selector-text-bold"},$e={class:"wheel-selector-text wheel1"},Je={class:"wheel-selector-text wheel2"};function qe(e,t,a,r,i,c){return Object(s["j"])(),Object(s["d"])("div",{id:"myModal",class:"modal",onClick:t[1]||(t[1]=function(t){return e.$emit("closeLanguageModal")})},[Object(s["e"])("div",{class:"modal-content",onWheel:t[0]||(t[0]=function(e){return c.handleWheel()})},[Object(s["e"])("img",{src:n("a49b")("./"+c.currentLanguageIcon(e.localcurrentLanguage)+"Icon.svg")},null,8,Ee),Object(s["e"])("div",_e,[Object(s["e"])("div",Be,Object(s["o"])(c.currentLanguageName(e.languageSelectorArray[0])),1),Object(s["e"])("div",Ue,Object(s["o"])(c.currentLanguageName(e.languageSelectorArray[1])),1),Object(s["e"])("div",Pe,Object(s["o"])(c.currentLanguageName(e.languageSelectorArray[2])),1),Object(s["e"])("div",$e,Object(s["o"])(c.currentLanguageName(e.languageSelectorArray[3])),1),Object(s["e"])("div",Je,Object(s["o"])(c.currentLanguageName(e.languageSelectorArray[4])),1)])],32)])}Object(s["k"])();var Ke={props:["currentLanguage"],data:function(){return{languageArray:["ko","ja","es","fr","en"],languageSelectorArray:[],localcurrentLanguage:this.currentLanguage}},methods:{currentLanguageIcon:function(e){return"es"==e?e="Spanish":"ja"==e?e="Japanese":"ko"==e?e="Korean":"fr"==e?e="French":"en"==e&&(e="English"),e},currentLanguageName:function(e){return"es"==e?e="Español":"ja"==e?e="日本語":"ko"==e?e="한국어":"fr"==e?e="Français":"en"==e&&(e="English"),e},handleWheel:function(){window.addEventListener("wheel",this.handleWheelThis)},handleWheelThis:function(e){var t=this.languageArray.indexOf(this.currentLanguage);e.deltaY<0?(t--,t<0&&(t=this.languageArray.length-1),this.$emit("setCurrentLanguage",this.languageArray[t])):e.deltaY>0&&(t++,t>this.languageArray.length-1&&(t=0),this.$emit("setCurrentLanguage",this.languageArray[t])),this.localcurrentLanguage=this.languageArray[t],this.renderLanguageList(t)},renderLanguageList:function(e){var t=e-2;t<0&&(t=this.languageArray.length+t);var n=e-1;n<0&&(n=this.languageArray.length+n);var s=e+1;s>this.languageArray.length-1&&(s-=this.languageArray.length);var a=e+2;a>this.languageArray.length-1&&(a-=this.languageArray.length),this.languageSelectorArray=[this.languageArray[t],this.languageArray[n],this.languageArray[e],this.languageArray[s],this.languageArray[a]]}},created:function(){var e=this.languageArray.indexOf(this.currentLanguage);this.renderLanguageList(e)},beforeUnmount:function(){window.removeEventListener("wheel",this.handleWheelThis)}};n("01c5");Ke.render=qe,Ke.__scopeId="data-v-3a87c03f";var De=Ke,We={name:"App",components:{SignIn:J,ChatRoom:ne,ChatList:Te,LanguageModal:De},data:function(){return{username:"",socket:d()("http://localhost:3000"),messages:[],users:[],showSignIn:!0,currentChatId:"",currentChatUser:"",currentLanguage:"es",openmodal:!1,unreadMessages:[],pushNotifications:!1,windowFocus:!0,unreadMessagesTotal:0}},methods:{joinServer:function(){this.socket.emit("start",this.showSignIn),this.listen()},listen:function(){var e=this;this.socket.on("loggedIn",(function(t){e.users=t.users,e.socket.emit("newuser",e.username)})),this.socket.on("msg",(function(t){if(e.users.indexOf(t.usernameFrom)!=e.currentChatId&&e.unreadMessages[e.users.indexOf(t.usernameFrom)]++,t.language==e.currentLanguage){if(e.pushNotifications){var s=n("adad");e.$notification.show(t.usernameFrom,{body:t.msg,icon:s},{})}e.messages.push(t)}else e.requestTranslation(t)}))},requestTranslation:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function s(){var a,r,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,fetch("https://translate.astian.org/translate",{method:"POST",body:JSON.stringify({q:e.msg,source:e.language,target:t.currentLanguage}),headers:{"Content-Type":"application/json"}});case 2:return a=s.sent,s.next=5,a.json();case 5:r=s.sent,e.msg=r.translatedText,t.pushNotifications&&(i=n("adad"),t.$notification.show(e.usernameFrom,{body:e.msg,icon:i},{})),t.messages.push(e);case 9:case"end":return s.stop()}}),s)})))()},setNickname:function(e){this.showSignIn=!1,this.username=e,this.username||(this.username="Anonymous"),this.joinServer()},sendMessage:function(e){var t={usernameFrom:this.username,usernameTo:this.users[this.currentChatId],msg:e,timestamp:this.getTime(),language:this.currentLanguage};this.messages.push(t),this.socket.emit("msg",t)},setChatId:function(e){this.currentChatId=e,this.currentChatUser=this.users[this.currentChatId],this.unreadMessages[this.currentChatId]=0,document.getElementById("menu-overlay").classList.remove("menu-overlay-visible"),document.getElementById("chat-sidebar").classList.remove("chat-sidebar-visible")},getTime:function(){var e=(new Date).toLocaleTimeString();return e=e.substr(0,e.lastIndexOf(":")),e},setCurrentLanguage:function(e){this.currentLanguage=e},closeLanguageModal:function(){this.openmodal=!1},openMenu:function(){document.getElementById("menu-overlay").classList.add("menu-overlay-visible"),document.getElementById("chat-sidebar").classList.add("chat-sidebar-visible")},closeMenu:function(){document.getElementById("menu-overlay").classList.remove("menu-overlay-visible"),document.getElementById("chat-sidebar").classList.remove("chat-sidebar-visible")},setPushNotifications:function(e){this.pushNotifications=e}},created:function(){var e=this;this.socket.emit("start",this.showSignIn),this.socket.on("userData",(function(t){e.users=t.users;for(var n=0;n<e.users.length;n++)e.unreadMessages.push(0)})),this.socket.on("userOnline",(function(t){e.unreadMessages.push(0),e.users.push(t)})),this.socket.on("userLeft",(function(t){e.unreadMessages.splice(e.users.indexOf(t),1),e.users.splice(e.users.indexOf(t),1)}))},mounted:function(){window.addEventListener("blur",(function(){this.windowFocus=!1})),window.addEventListener("focus",(function(){document.title="Babilejo",this.unreadMessagesTotal=0,this.windowFocus=!0}))}};n("7bad");We.render=u;var Re=We,ze=n("7f0a"),Ye=Object(s["b"])(Re);Ye.use(ze["a"],{requestOnNotify:!0}),Ye.mount("#app")},"646b":function(e,t,n){e.exports=n.p+"img/FrenchIcon.86b57102.svg"},"66fc":function(e,t,n){e.exports=n.p+"img/BabilejoIcon.1ea43fb7.svg"},"67a9":function(e,t,n){e.exports=n.p+"img/BackIcon.216af44f.svg"},"6e4c":function(e,t,n){e.exports=n.p+"img/MenuIcon.98e9faeb.svg"},7315:function(e,t,n){e.exports=n.p+"img/NotificationIcon.589aa500.svg"},7370:function(e,t,n){"use strict";n("7acb")},"793b":function(e,t,n){e.exports=n.p+"img/JapaneseIcon.8ca2a073.svg"},"7acb":function(e,t,n){},"7bad":function(e,t,n){"use strict";n("df53")},"7bd5":function(e,t,n){e.exports=n.p+"img/Frame4.c45f11e2.svg"},"7d23":function(e,t,n){e.exports=n.p+"img/Icon0.84464e7a.svg"},8310:function(e,t,n){"use strict";n("27d2")},"849b":function(e,t,n){e.exports=n.p+"img/Frame3.697c2979.svg"},"8aa4":function(e,t,n){},"8e5a":function(e,t,n){e.exports=n.p+"img/Frame5.90469a1a.svg"},"93dc":function(e,t,n){e.exports=n.p+"img/Frame2.557d9526.svg"},"9ba1":function(e,t,n){e.exports=n.p+"img/Icon1.ec76f2a8.svg"},a093:function(e,t,n){e.exports=n.p+"img/SpanishIcon.62d705d2.svg"},a49b:function(e,t,n){var s={"./BabilejoIcon.svg":"66fc","./BackIcon.svg":"67a9","./EnglishIcon.svg":"df59","./EsperantoIcon.svg":"e59c","./FrenchIcon.svg":"646b","./JapaneseIcon.svg":"793b","./KoreanIcon.svg":"d14d","./MenuIcon.svg":"6e4c","./NotificationIcon.svg":"7315","./SendIcon.svg":"f08d","./SettingsIcon.svg":"130b","./SpanishIcon.svg":"a093"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id="a49b"},a750:function(e,t,n){var s={"./Icon0.svg":"7d23","./Icon1.svg":"9ba1","./Icon2.svg":"c3d6","./Icon3.svg":"2ff0","./Icon4.svg":"aa17","./Icon5.svg":"c764"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id="a750"},aa17:function(e,t,n){e.exports=n.p+"img/Icon4.1502f794.svg"},adad:function(e,t,n){e.exports=n.p+"img/BabilejoIcon.d51819fd.png"},c3d6:function(e,t,n){e.exports=n.p+"img/Icon2.97c498cb.svg"},c764:function(e,t,n){e.exports=n.p+"img/Icon5.d505c894.svg"},d14d:function(e,t,n){e.exports=n.p+"img/KoreanIcon.7adc69bd.svg"},df53:function(e,t,n){},df59:function(e,t,n){e.exports=n.p+"img/EnglishIcon.d53f4d67.svg"},e59c:function(e,t,n){e.exports=n.p+"img/EsperantoIcon.2d889e86.svg"},e9e8:function(e,t,n){},f08d:function(e,t,n){e.exports=n.p+"img/SendIcon.9ed075d8.svg"}});
//# sourceMappingURL=app.8349f416.js.map